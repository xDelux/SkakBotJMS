Setup piece list for both sides
generate moves for both sides
keep track of attacked squares